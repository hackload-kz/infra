# HackLoad Job Service Configuration Template
# Copy this file to .env for local development

# =============================================================================
# CORE APPLICATION SETTINGS
# =============================================================================

# Runtime environment (development, production)
NODE_ENV=development

# Logging level (error, warn, info, debug)
LOG_LEVEL=info

# =============================================================================
# HUB API CONFIGURATION
# =============================================================================

# Hub API base URL (required)
API_BASE_URL=https://hub.hackload.kz

# Service API key for Hub authentication (required)
SERVICE_API_KEY=hackload-service-key-your-key-here

# API request timeout in milliseconds
API_TIMEOUT=30000

# Number of API retry attempts
API_RETRIES=3

# =============================================================================
# SERVICE ENABLEMENT
# =============================================================================

# Enable/disable individual services
GIT_MONITOR_ENABLED=true
DEPLOYMENT_MONITOR_ENABLED=true
K6_SERVICES_ENABLED=false

# =============================================================================
# JOB SCHEDULING
# =============================================================================

# Git Monitor Service
GIT_MONITOR_INTERVAL=*/30 * * * *
GIT_MONITOR_TIMEOUT=300000
GIT_MONITOR_RETRIES=3

# Deployment Monitor Service  
DEPLOYMENT_MONITOR_INTERVAL=*/15 * * * *
DEPLOYMENT_MONITOR_TIMEOUT=30000
DEPLOYMENT_MONITOR_RETRIES=2

# K6 Performance Services
K6_SERVICES_INTERVAL=0 */6 * * *
K6_SERVICES_TIMEOUT=1200000
K6_SERVICES_RETRIES=1


# =============================================================================
# GITHUB CONFIGURATION
# =============================================================================

# GitHub API base URL
GITHUB_API_URL=https://api.github.com

# GitHub personal access token (required for git monitoring)
GITHUB_TOKEN=ghp_your_github_token_here

# Alternative: GitHub App authentication (optional)
# GITHUB_APP_ID=123456
# GITHUB_APP_PRIVATE_KEY=-----BEGIN RSA PRIVATE KEY-----\nYour private key here\n-----END RSA PRIVATE KEY-----

# =============================================================================
# HTTP CONFIGURATION
# =============================================================================

# HTTP timeout for deployment monitoring
HTTP_TIMEOUT=10000

# User agent for HTTP requests
USER_AGENT=HackLoad-Monitor/1.0

# =============================================================================
# GRAFANA CONFIGURATION (for K6 services)
# =============================================================================

# Grafana API URL (required if K6 services enabled)
# GRAFANA_API_URL=https://grafana.hackload.kz/api

# Grafana API token (required if K6 services enabled)
# GRAFANA_TOKEN=glsa_your_grafana_token_here

# Alternative: Grafana username authentication
# GRAFANA_USERNAME=hackload-job-service

# K6 results retention in days
K6_RESULTS_RETENTION=30


# =============================================================================
# DATABASE CONFIGURATION (optional direct access)
# =============================================================================

# Direct database connection (fallback, usually not needed)
# DATABASE_URL=postgresql://user:password@localhost:5432/hackload

# Database connection pool size
DB_POOL_SIZE=5

# Database query timeout in milliseconds
DB_TIMEOUT=30000

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Health check endpoint port
HEALTH_CHECK_PORT=8080

# Prometheus metrics endpoint port
METRICS_PORT=9090

# Enable Prometheus metrics collection
METRICS_ENABLED=true

# Enable distributed tracing
TRACING_ENABLED=false

# Prometheus push gateway URL (optional)
# PROMETHEUS_PUSHGATEWAY_URL=http://prometheus-pushgateway:9091

# Sentry error tracking DSN (optional)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# =============================================================================
# PERFORMANCE & RESOURCE LIMITS
# =============================================================================

# Maximum concurrent job execution
MAX_CONCURRENT_JOBS=5

# Memory limit in MB
MEMORY_LIMIT_MB=512

# CPU limit in cores
CPU_LIMIT_CORES=0.5

# API rate limit per minute
RATE_LIMIT_PER_MINUTE=60

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Set to true for additional debug logging
# DEBUG=true

# Set to true to disable SSL verification (development only)
# NODE_TLS_REJECT_UNAUTHORIZED=0